---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: auth-middleware
spec:
  headers:
    customRequestHeaders:
      # Hardcoded Bearer token for authorization
      # Authorization: "Bearer {{ index .Values.admin-user.data.token | b64dec }}"
      Authorization: "Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IllPUVgxR18LYNyA"
---
apiVersion: v1
kind: Secret
metadata:
  name: admin-user
  namespace: kubernetes-dashboard
  annotations:
    kubernetes.io/service-account.name: "admin-user"   
type: kubernetes.io/service-account-token  