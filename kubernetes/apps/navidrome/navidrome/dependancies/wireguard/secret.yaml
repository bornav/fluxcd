apiVersion: v1
kind: Secret
metadata:
  name: wireguard
type: Opaque
stringData:
  wg0.conf.template: |-
    [Interface]
    Address = 10.10.1.13/32
    privateKey = mFSAP7to4WXoSTfAtwH0w5RFvwVOJfelb8Qjide7uUo=
    PostUp = iptables -t nat -A POSTROUTING -s $HOSTADDR -o wg0 -j MASQUERADE; iptables -t nat -A PREROUTING -p tcp --dport 5800 -j DNAT --to-destination 10.2.11.201:5800; iptables -t nat -A PREROUTING -p tcp --dport 2049 -j DNAT --to-destination 10.2.11.200:2049; iptables -t nat -A PREROUTING -p tcp --dport 111 -j DNAT --to-destination 10.2.11.200:111
    #PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o ENI -j MASQUERADE
    #PostUp = sysctl -w -q net.ipv4.ip_forward=1
    #PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o ENI -j MASQUERADE
    #PostDown = sysctl -w -q net.ipv4.ip_forward=0
    [Peer]
    AllowedIPs = 10.0.0.0/8
    Endpoint = home.local.icecoldlair.com:51820
    PublicKey = By+X2iOyoKC0a2CMaXSOgOZAKvrUqYevOOzZm5pkfkQ=
